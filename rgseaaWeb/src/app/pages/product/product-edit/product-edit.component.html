
<form [formGroup]="form">

    <tsw-form-container>

        <tsw-section-wrapper class="mb-5" icon="edit_note">

            <div section-content>

                <div section-content>
                    <div class="flex justify-end">
                        <h1 class="text-3xl">PRODUCTO</h1>
                        <br/>
                    </div>
                </div>

            </div>

            <div section-content>

                <div class="flex justify-end">

                    <div matTooltip="Regresar">
                        <a
                            mat-icon-button color="primary" [disabled]="this._idIndustry == undefined"
                            [routerLink]="'industryManagementEdit' | namedRoute: {id: this._idIndustry }">
                            <mat-icon>keyboard_return</mat-icon>
                        </a>
                    </div>

                </div>

            </div>

            <div section-content>
                <h1 class="text-2xl">Datos Generales</h1>
                <br/>
                <div class="flex flex-row gap-1.5">

                    <mat-form-field *ngIf="showNue" class="w-30" >
                        <mat-label>RGSA-NUE</mat-label>
                        <input matInput formControlName="numBusiness">
                    </mat-form-field>

                    <mat-form-field class="w-14">
                        <mat-label>Clave</mat-label>
                        <tsw-custom-select
                            resourceName="productsKeys"
                            formControlName="key"
                        ></tsw-custom-select>
                    </mat-form-field>

                    <mat-form-field class="w-30">
                        <mat-label></mat-label>
                        <input matInput formControlName="industryNum">
                    </mat-form-field>

                    <mat-form-field class="w-12">
                        <mat-label></mat-label>
                        <input matInput formControlName="enrollment">
                    </mat-form-field>


                    <div class="w-20">

                    </div>

                    <mat-form-field class="1/10">
                        <mat-label>Nº prod</mat-label>
                        <input matInput formControlName="numProduct">
                    </mat-form-field>

                    <mat-form-field class="1/10">
                        <mat-label>Nº Reg CCAA</mat-label>
                        <input matInput formControlName="numRegister">
                    </mat-form-field>

                    <mat-form-field class="1/10">
                        <mat-label>Situacion</mat-label>
                        <tsw-custom-select
                            resourceName="productsSituations"
                            formControlName="situation"
                        ></tsw-custom-select>
                    </mat-form-field>

                </div>

                <div class="grid grid-cols-2 gap-1.5">

                    <mat-form-field>
                        <mat-label>Denominación de venta </mat-label>
                        <tsw-custom-select
                            resourceName="productsDenominationSales"
                            formControlName="denominationSale"
                        ></tsw-custom-select>
                    </mat-form-field>

                    <mat-form-field>
                        <mat-label>Nombre comercial</mat-label>
                        <input matInput formControlName="brand">
                    </mat-form-field>



                    <mat-form-field>
                        <mat-label>Autoridad Competente</mat-label>
                        <tsw-custom-select
                            resourceName="productsEntities"
                            formControlName="competentAuthority"
                        ></tsw-custom-select>
                    </mat-form-field>

                    <mat-checkbox
                        class="example-margin"
                        formControlName="requestDocumentAnnotated"
                        >
                        Solicitar Documento Anotación de Producto
                    </mat-checkbox>

                </div>

            </div>

        </tsw-section-wrapper>

    </tsw-form-container>


    <tsw-form-container>
        <tsw-section-wrapper class="mb-5" icon="edit_note">
            <div section-content>
                <h1 class="text-2xl">Datos Empresa Responsable de la Comercialización </h1>
                <br/>
                <div class="flex gap-1.5">

                    <mat-form-field class="basis-6/12" >
                        <mat-label>Razón Social (Escribir "Razón Social (nºRGSEAA)" para asociar a una industria)</mat-label>
                        <input matInput
                               formControlName="industryName">
                        <button matSuffix mat-icon-button aria-label="Clear">
                            <mat-icon>shuffle</mat-icon>
                        </button>
                    </mat-form-field>

                    <mat-form-field class="basis-6/12">
                        <mat-label>Correo Electrónico</mat-label>
                        <input matInput
                               formControlName="emailResponsible">
                    </mat-form-field>

                </div>

                <div class="flex gap-1.5">
                    <mat-form-field class="basis-6/12">
                        <mat-label>País empresa responsable</mat-label>
                        <tsw-custom-select
                            resourceName="productsCountries"
                            formControlName="countryIndustryResponsible"
                            [(ngModel)]="valueCountry"
                            (valueSelected)="chanceCountry($event)"
                        ></tsw-custom-select>
                    </mat-form-field>
                </div>

                <div class="flex flex-row gap-1.5" *ngIf="isSpain">

                    <mat-form-field class="basis-6/12">
                        <mat-label>Provincia</mat-label>
                        <input matInput
                               formControlName="provinceIndustryResponsible">
                    </mat-form-field>

                </div>

                <div class="flex flex-row gap-1.5" *ngIf="isSpain">

                    <mat-form-field class="basis-6/12">
                        <mat-label>Municipio</mat-label>
                        <input matInput
                               formControlName="townIndustryResponsible">
                    </mat-form-field>

                </div>

                <div class="flex flex-row gap-1.5" *ngIf="!isSpain">
                    <mat-form-field class="basis-6/12">
                        <mat-label>Población</mat-label>
                        <input matInput formControlName="addressIndustryResponsible">
                    </mat-form-field>
                </div>

                <div class="flex flex-row gap-1.5" >
                    <mat-form-field class="basis-6/12">
                        <mat-label>Domicilio Empresa(Domicilio Social)</mat-label>
                        <input matInput formControlName="industryAddress">
                    </mat-form-field>
                </div>

                <div class="flex flex-row gap-1.5" *ngIf="isSpain">
                    <mat-form-field class="basis-6/12">
                        <mat-label>Codigo Postal</mat-label>
                        <input matInput formControlName="codePostalResponsible">
                    </mat-form-field>
                </div>

            </div>
        </tsw-section-wrapper>
    </tsw-form-container>



    <tsw-form-container>
        <tsw-section-wrapper class="mb-5" icon="edit_note">
            <div section-content>
                <h1 class="text-2xl">Información Adicional Clave 26</h1>
                <br/>

                <div class="flex flex-row gap-1.5">

                    <mat-form-field class="basis-1/4">
                        <mat-label>País donde se fabrica</mat-label>
                        <tsw-custom-select
                            resourceName="productsCountries"
                            formControlName="countryManufacturingKey26"
                        ></tsw-custom-select>
                    </mat-form-field>

                    <mat-form-field class="basis-1/4">
                        <mat-label>País donde se ha comercializado</mat-label>
                        <tsw-custom-select
                            resourceName="productsCountries"
                            formControlName="countryCommercializedKey26"
                        ></tsw-custom-select>
                    </mat-form-field>

                    <mat-form-field class="basis-1/2">
                        <mat-label>Forma de Presentación</mat-label>
                        <tsw-custom-select
                            resourceName="productsPresentation"
                            formControlName="formPresentationKey26"
                        ></tsw-custom-select>
                    </mat-form-field>

                </div>


                <div class="flex flex-row gap-1.5">

                    <mat-form-field class="basis-1/2">
                        <mat-label>Tipo de Envase</mat-label>
                        <input matInput formControlName="typePackagingKey26">
                    </mat-form-field>

                </div>


                <div class="flex flex-row gap-1.5">

                    <mat-form-field class="basis-1/2">
                        <mat-label>Observaciones</mat-label>
                        <textarea  matInput rows="5" formControlName="observationKey26"></textarea>
                    </mat-form-field>

                    <mat-form-field class="basis-1/2">
                        <mat-label>Ingredientes</mat-label>
                        <textarea  matInput rows="5" formControlName="ingredientKey26"></textarea>
                    </mat-form-field>
                </div>


                <div class="flex flex-row gap-1.5">

                    <mat-form-field class="basis-1/2">
                        <mat-label>Razón Social (a efectos notificación)</mat-label>
                        <input matInput formControlName="industryNameKey26">
                    </mat-form-field>

                    <mat-form-field class="basis-1/2">
                        <mat-label>Domicilio (a efectos notificación)</mat-label>
                        <input matInput formControlName="addressKey26">
                    </mat-form-field>

                </div>

                <div class="flex flex-row gap-1.5">

                    <mat-form-field class="basis-1/4">
                        <mat-label>Correo electrónico (a efectos notificación)</mat-label>
                        <input matInput formControlName="emailKey26">
                    </mat-form-field>

                    <mat-form-field class="basis-1/4">
                        <mat-label>Anotación</mat-label>
                        <input matInput [matDatepicker]="picker" formControlName="annotatedDateKey26">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>

                    <mat-form-field class="basis-1/4">
                        <mat-label>Última modificación</mat-label>
                        <input matInput [matDatepicker]="picker1" formControlName="lastDateKey26">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>


                    <mat-form-field class="basis-1/4">
                        <mat-label>País (a efectos notificación)</mat-label>
                        <tsw-custom-select
                            resourceName="productsCountries"
                            formControlName="countryNotificationKey26"
                        >
                        </tsw-custom-select>
                    </mat-form-field>

                </div>


            </div>
        </tsw-section-wrapper>
    </tsw-form-container>



    <tsw-form-container>
        <tsw-section-wrapper class="mb-5" icon="edit_note">
            <div section-content>
                <h1 class="text-2xl">Actuaciones/ Documentos</h1>
                <br/>

                <div class="flex flex-row gap-1.5" *ngIf="!isNew">

                    <mat-form-field class="basis-2/4">
                        <mat-label>Tipo Actuación</mat-label>
                        <tsw-custom-select
                            resourceName="productTypeAction"
                            formControlName="typeAction"
                        ></tsw-custom-select>
                    </mat-form-field>

                    <div class="basis-1/4">
                        <button mat-raised-button color="primary" (click)="addRow()">Añadir</button>
                    </div>

                </div>

                <div class="grid grid-cols-1 gap-1.5">

                    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 demo-table">

                        <!-- Position Column -->
                        <ng-container matColumnDef="date">
                            <th mat-header-cell *matHeaderCellDef> Fecha </th>
                            <td mat-cell *matCellDef="let element">{{element.id}}</td>
                        </ng-container>


                        <!-- Name Column -->
                        <ng-container matColumnDef="type-name">
                            <th mat-header-cell *matHeaderCellDef> Tipo </th>
                            <td mat-cell *matCellDef="let element">{{element.typeAction.name}}</td>
                        </ng-container>


                        <!-- Weight Column -->
                        <ng-container matColumnDef="description">
                            <th mat-header-cell *matHeaderCellDef> Descripción </th>
                            <td mat-cell *matCellDef="let element">  </td>
                        </ng-container>


                        <!-- Symbol Column -->
                        <ng-container matColumnDef="files">
                            <th mat-header-cell *matHeaderCellDef> Fichero </th>
                            <td mat-cell *matCellDef="let element">  </td>
                        </ng-container>


                        <ng-container matColumnDef="actions">
                            <th mat-header-cell *matHeaderCellDef> Acciones </th>

                            <td mat-cell *matCellDef="let element">

                                <div *ngIf="element.typeAction.id==21">
                                    <button mat-mini-fab color="primary" (click)="openDialog(element.id)">
                                        <mat-icon>attach_file</mat-icon>
                                    </button>
                                </div>

                                <div *ngIf="element.typeAction.id!=21">
                                    <button mat-mini-fab color="primary" (click)="openDialog(element.id)">
                                        <mat-icon>attach_file</mat-icon>
                                    </button>
                                    <button mat-mini-fab color="warn" (click)="deleteRow(element.id)">
                                        <mat-icon>delete</mat-icon>
                                    </button>
                                </div>

                            </td>

                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

                        <tr mat-row *matRowDef="let row; columns: displayedColumns;" [hidden]="row.update === 1"></tr>

                    </table>

                </div>


            </div>
        </tsw-section-wrapper>

        <tsw-form-actions
            [saveBtnSkipConfirmation]="skipSaveConfirmation"
            (reset)="resetForm()"
            (save)="submitForm()"
        ></tsw-form-actions>

    </tsw-form-container>
</form>



